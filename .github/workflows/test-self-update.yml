name: Test-self-update

# Controls when the workflow will run
on:
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
  schedule:
  - cron: "30 10 * * 1"

jobs:
  update:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - uses: timbertson/self-update-action@v1
      with:
        GITHUB_TOKEN: ${{secrets.DEPLOY_KEY_FOR_DEPLOY_TEST_REPO}}
        baseBranch: main
        branchName: update-time
        updateScript: |-
          date -u +%Y-%m-%dT%H:%M:%S >> current_time.txt
          git add --intent-to-add current_time.txt
